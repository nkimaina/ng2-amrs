<div [ngBusy]="{busy:[isBusy],message:'Loading...'}">

  <h4 class="component-title"><span class="icon-i-outpatient"></span>Current Visit</h4>
  <div *ngFor="let error of errors" class="alert alert-danger alert-dismissible">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button> {{error.message}}
  </div>
  <div *ngIf="!visit && patient">
    <h3>Select visit type</h3>
    <div class="box-body forms-list">
      <app-visit-starter [patientUuid]="patient.uuid" [programEnrollmentUuid]="currentProgramEnrollmentUuid" [programUuid]="programUuid"
        (visitStarted)="onVisitStartedOrChanged($event)"></app-visit-starter>
    </div>
  </div>

  <app-visit-details *ngIf="visit && patient" [visit]="visit" (encounterSelected)="onEncounterSelected($event)" [programVisitTypesConfig]="currentProgramConfig"
    (formSelected)="onFormSelected($event)" (visitCancelled)="onVisitStartedOrChanged($event)"></app-visit-details>
</div>
